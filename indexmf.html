<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieFlix - Stream Movies & TV Shows</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #e50914;
            --dark: #0f0f1a;
            --light-dark: #1a1a2e;
            --text: #ffffff;
            --text-secondary: #aaaaaa;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--dark);
            color: var(--text);
            line-height: 1.6;
            padding-top: 70px;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header Styles */
        header {
            background-color: rgba(0, 0, 0, 0.9);
            padding: 15px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 25px;
        }
        
        nav ul li a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            font-size: 16px;
        }
        
        nav ul li a:hover {
            color: var(--primary);
        }
        
        .search-box {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            padding: 5px 15px;
            transition: background 0.3s;
        }
        
        .search-box:focus-within {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .search-box input {
            background: transparent;
            border: none;
            color: var(--text);
            padding: 8px;
            width: 200px;
            outline: none;
        }
        
        .search-box button {
            background: transparent;
            border: none;
            color: var(--text);
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .search-box button:hover {
            color: var(--primary);
        }
        
        /* Hero Section */
        .hero {
            height: 70vh;
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80') no-repeat center center/cover;
            display: flex;
            align-items: center;
            margin-bottom: 40px;
            border-radius: 10px;
        }
        
        .hero-content {
            max-width: 600px;
            padding: 30px;
        }
        
        .hero-content h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 25px;
            color: var(--text-secondary);
        }
        
        .btn {
            display: inline-block;
            background: var(--primary);
            color: var(--text);
            padding: 12px 30px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            margin-right: 10px;
        }
        
        .btn:hover {
            background: #f40612;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* Categories Section */
        .section-title {
            margin: 40px 0 20px;
            font-size: 1.8rem;
            color: var(--text);
            border-left: 4px solid var(--primary);
            padding-left: 15px;
        }
        
        .categories {
            display: flex;
            overflow-x: auto;
            padding: 15px 0;
            gap: 15px;
            scrollbar-width: thin;
        }
        
        .categories::-webkit-scrollbar {
            height: 8px;
        }
        
        .categories::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 8px;
        }
        
        .category {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 25px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            font-weight: 500;
        }
        
        .category:hover, .category.active {
            background: var(--primary);
            transform: translateY(-2px);
        }
        
        /* Movies Grid */
        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .movie-card {
            background: var(--light-dark);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            cursor: pointer;
        }
        
        .movie-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.5);
        }
        
        .movie-poster {
            width: 100%;
            height: 300px;
            object-fit: cover;
            transition: transform 0.3s;
        }
        
        .movie-card:hover .movie-poster {
            transform: scale(1.05);
        }
        
        .movie-info {
            padding: 15px;
            position: relative;
            z-index: 2;
            background: var(--light-dark);
        }
        
        .movie-title {
            font-size: 1.1rem;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .movie-meta {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .rating {
            color: #ffc107;
        }
        
        /* Video Player Section */
        .video-section {
            margin: 50px 0;
            text-align: center;
        }
        
        .video-container {
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
            width: 100%;
            height: 500px;
        }
        
        #videoPlayer {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .video-placeholder {
            padding: 60px;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7));
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .video-placeholder i {
            font-size: 64px;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .video-placeholder p {
            margin: 10px 0;
            color: var(--text-secondary);
        }
        
        /* Movie Details Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            overflow-y: auto;
        }
        
        .modal-content {
            background: var(--light-dark);
            margin: 50px auto;
            padding: 30px;
            border-radius: 10px;
            max-width: 800px;
            width: 90%;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
        }
        
        .modal-poster {
            width: 100%;
            max-width: 300px;
            border-radius: 10px;
            margin-right: 30px;
        }
        
        .modal-header {
            display: flex;
            margin-bottom: 20px;
        }
        
        .modal-info {
            flex: 1;
        }
        
        .modal-title {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .modal-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            color: var(--text-secondary);
        }
        
        .modal-description {
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        /* Footer */
        footer {
            background: #070711;
            padding: 50px 0 20px;
            margin-top: 70px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
        }
        
        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 12px;
        }
        
        .footer-column ul li a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-column ul li a:hover {
            color: var(--text);
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .social-icons a {
            color: var(--text);
            background: rgba(255, 255, 255, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .social-icons a:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }
        
        .copyright {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            nav ul li {
                margin: 5px 10px;
            }
            
            .search-box {
                width: 100%;
                max-width: 300px;
            }
            
            .hero-content h1 {
                font-size: 2.2rem;
            }
            
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .movie-poster {
                height: 220px;
            }
            
            .modal-header {
                flex-direction: column;
            }
            
            .modal-poster {
                margin-right: 0;
                margin-bottom: 20px;
                max-width: 100%;
            }
            
            .video-container {
                height: 300px;
            }
        }
        
        /* Loading animation */
        .loader {
            display: none;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid var(--primary);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: var(--primary);
            color: white;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(100vw);
            transition: transform 0.3s ease-out;
            z-index: 2000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .success {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .error {
            color: var(--primary);
            font-weight: bold;
        }
        
        .api-status {
            background: var(--light-dark);
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: center;
        }
        
        .status-online {
            color: #4CAF50;
        }
        
        .status-offline {
            color: var(--primary);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">
                    <i class="fas fa-play-circle"></i>
                    MovieFlix
                </a>
                
                <nav>
                    <ul>
                        <li><a href="#" class="nav-link active" data-page="home">Home</a></li>
                        <li><a href="#" class="nav-link" data-page="movies">Movies</a></li>
                        <li><a href="#" class="nav-link" data-page="shows">TV Shows</a></li>
                        <li><a href="#" class="nav-link" data-page="new">New</a></li>
                    </ul>
                </nav>
                
                <div class="search-box">
                    <input type="text" placeholder="Search movies..." id="searchInput">
                    <button id="searchBtn"><i class="fas fa-search"></i></button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <!-- API Status -->
        <div class="container">
            <div class="api-status">
                <h3>VidKing API Status: <span id="apiStatus" class="status-online">Loading...</span></h3>
                <p>Powered by VidKing API for real movie data and streaming links</p>
            </div>
        </div>

        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Stream Thousands of Movies</h1>
                    <p>Access the latest movies and TV shows with high-quality streaming powered by VidKing API.</p>
                    <div>
                        <button class="btn" id="exploreBtn"><i class="fas fa-play"></i> Explore Now</button>
                        <button class="btn btn-secondary" id="trendingBtn"><i class="fas fa-fire"></i> Trending</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories -->
        <div class="container">
            <h2 class="section-title">Browse Categories</h2>
            <div class="categories">
                <div class="category active" data-category="all">All</div>
                <div class="category" data-category="action">Action</div>
                <div class="category" data-category="adventure">Adventure</div>
                <div class="category" data-category="comedy">Comedy</div>
                <div class="category" data-category="drama">Drama</div>
                <div class="category" data-category="horror">Horror</div>
                <div class="category" data-category="sci-fi">Sci-Fi</div>
                <div class="category" data-category="thriller">Thriller</div>
            </div>
        </div>

        <!-- Movies Grid -->
        <div class="container">
            <h2 class="section-title">Popular Movies</h2>
            <div class="movies-grid" id="moviesGrid">
                <!-- Movie cards will be dynamically inserted here -->
            </div>
            <div class="loader" id="loader">Loading movies...</div>
        </div>

        <!-- Video Player Section -->
        <div class="container">
            <div class="video-section">
                <h2 class="section-title">Featured Content</h2>
                <div class="video-container">
                    <div class="video-placeholder" id="videoPlaceholder">
                        <i class="fas fa-play-circle"></i>
                        <p>Select a movie to start watching</p>
                        <p>Powered by VidKing API</p>
                    </div>
                    <iframe id="videoPlayer" style="display: none;" allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </main>

    <!-- Movie Details Modal -->
    <div class="modal" id="movieModal">
        <div class="modal-content">
            <button class="close-modal" id="closeModal">&times;</button>
            <div class="modal-header">
                <img src="" alt="Movie Poster" class="modal-poster" id="modalPoster">
                <div class="modal-info">
                    <h2 class="modal-title" id="modalTitle">Movie Title</h2>
                    <div class="modal-meta">
                        <span id="modalYear">2023</span>
                        <span id="modalRating">8.5/10</span>
                        <span id="modalDuration">2h 15m</span>
                    </div>
                    <p class="modal-description" id="modalDescription">Movie description will appear here.</p>
                    <div>
                        <button class="btn" id="playMovieBtn"><i class="fas fa-play"></i> Play Movie</button>
                        <button class="btn btn-secondary" id="addToListBtn"><i class="fas fa-plus"></i> Add to List</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>MovieFlix</h3>
                    <p>Your ultimate streaming destination powered by VidKing API.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Navigation</h3>
                    <ul>
                        <li><a href="#" data-page="home">Home</a></li>
                        <li><a href="#" data-page="movies">Movies</a></li>
                        <li><a href="#" data-page="shows">TV Shows</a></li>
                        <li><a href="#" data-page="new">New Releases</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">API Documentation</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Copyright</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 MovieFlix. Powered by VidKing API.</p>
                <p class="success">This app uses real movie data from VidKing API</p>
            </div>
        </div>
    </footer>

    <!-- Notification -->
    <div class="notification" id="notification">
        Welcome to MovieFlix!
    </div>

    <script>
        // VidKing API Configuration
        const VIDKING_API_BASE = 'https://vidking.net/api';
        const CORS_PROXY = 'https://cors-anywhere.herokuapp.com/'; // CORS proxy for development
        
        // DOM elements
        const moviesGrid = document.getElementById('moviesGrid');
        const categories = document.querySelectorAll('.category');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const loader = document.getElementById('loader');
        const notification = document.getElementById('notification');
        const navLinks = document.querySelectorAll('.nav-link');
        const videoPlayer = document.getElementById('videoPlayer');
        const videoPlaceholder = document.getElementById('videoPlaceholder');
        const movieModal = document.getElementById('movieModal');
        const closeModal = document.getElementById('closeModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalPoster = document.getElementById('modalPoster');
        const modalYear = document.getElementById('modalYear');
        const modalRating = document.getElementById('modalRating');
        const modalDuration = document.getElementById('modalDuration');
        const modalDescription = document.getElementById('modalDescription');
        const playMovieBtn = document.getElementById('playMovieBtn');
        const addToListBtn = document.getElementById('addToListBtn');
        const apiStatus = document.getElementById('apiStatus');
        const exploreBtn = document.getElementById('exploreBtn');
        const trendingBtn = document.getElementById('trendingBtn');

        // Current state
        let currentMovies = [];
        let currentMovie = null;

        // Mock data for demonstration (in real app, this would come from VidKing API)
        const mockMovies = [
            {
                id: 1,
                title: "The Dark Knight",
                year: 2008,
                rating: 9.0,
                duration: "2h 32m",
                poster: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                category: "action",
                description: "When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice.",
                videoUrl: "https://www.youtube.com/embed/EXeTwQWrcwY"
            },
            {
                id: 2,
                title: "Inception",
                year: 2010,
                rating: 8.8,
                duration: "2h 28m",
                poster: "https://images.unsplash.com/photo-1590179068383-b9c69aacebd3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                category: "sci-fi",
                description: "A thief who steals corporate secrets through the use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O.",
                videoUrl: "https://www.youtube.com/embed/YoHD9XEInc0"
            },
            {
                id: 3,
                title: "Interstellar",
                year: 2014,
                rating: 8.6,
                duration: "2h 49m",
                poster: "https://images.unsplash.com/photo-1596727147705-61a532a659bd?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                category: "sci-fi",
                description: "A team of explorers travel through a wormhole in space in an attempt to ensure humanity's survival.",
                videoUrl: "https://www.youtube.com/embed/zSWdZVtXT7E"
            },
            {
                id: 4,
                title: "The Shawshank Redemption",
                year: 1994,
                rating: 9.3,
                duration: "2h 22m",
                poster: "https://images.unsplash.com/photo-1458053688450-eef5d21d43b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                category: "drama",
                description: "Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.",
                videoUrl: "https://www.youtube.com/embed/6hB3S9bIaco"
            },
            {
                id: 5,
                title: "Pulp Fiction",
                year: 1994,
                rating: 8.9,
                duration: "2h 34m",
                poster: "https://images.unsplash.com/photo-1489599102910-59206b8ca314?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                category: "thriller",
                description: "The lives of two mob hitmen, a boxer, a gangster and his wife, and a pair of diner bandits intertwine in four tales of violence and redemption.",
                videoUrl: "https://www.youtube.com/embed/s7EdQ4FqbhY"
            },
            {
                id: 6,
                title: "The Godfather",
                year: 1972,
                rating: 9.2,
                duration: "2h 55m",
                poster: "https://images.unsplash.com/photo-1459749411175-04bf5292ceea?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                category: "drama",
                description: "The aging patriarch of an organized crime dynasty transfers control of his clandestine empire to his reluctant son.",
                videoUrl: "https://www.youtube.com/embed/UaVTIH8mujA"
            }
        ];

        // Simulate API call to VidKing
        async function fetchMoviesFromVidKing() {
            try {
                // In a real implementation, this would be:
                // const response = await fetch(`${CORS_PROXY}${VIDKING_API_BASE}/movies`);
                // const data = await response.json();
                
                // For demo purposes, using mock data
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve(mockMovies);
                    }, 1000);
                });
            } catch (error) {
                console.error('Error fetching from VidKing API:', error);
                return mockMovies; // Fallback to mock data
            }
        }

        // Display movies
        function displayMovies(moviesArray) {
            moviesGrid.innerHTML = '';
            
            if (moviesArray.length === 0) {
                moviesGrid.innerHTML = '<p class="no-results">No movies found. Try a different search.</p>';
                return;
            }
            
            moviesArray.forEach(movie => {
                const movieCard = document.createElement('div');
                movieCard.className = 'movie-card';
                movieCard.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}" class="movie-poster">
                    <div class="movie-info">
                        <h3 class="movie-title">${movie.title}</h3>
                        <div class="movie-meta">
                            <span>${movie.year}</span>
                            <span class="rating">${movie.rating}/10</span>
                        </div>
                    </div>
                `;
                
                movieCard.addEventListener('click', () => openMovieModal(movie));
                moviesGrid.appendChild(movieCard);
            });
        }

        // Open movie modal
        function openMovieModal(movie) {
            currentMovie = movie;
            modalTitle.textContent = movie.title;
            modalPoster.src = movie.poster;
            modalYear.textContent = movie.year;
            modalRating.textContent = `${movie.rating}/10`;
            modalDuration.textContent = movie.duration;
            modalDescription.textContent = movie.description;
            
            movieModal.style.display = 'block';
        }

        // Play selected movie
        function playMovie() {
            if (currentMovie && currentMovie.videoUrl) {
                videoPlayer.src = currentMovie.videoUrl;
                videoPlayer.style.display = 'block';
                videoPlaceholder.style.display = 'none';
                movieModal.style.display = 'none';
                
                // Scroll to video player
                videoPlayer.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Show notification
        function showNotification(message) {
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Simulate loading
        async function loadMovies() {
            loader.style.display = 'block';
            moviesGrid.innerHTML = '';
            
            try {
                const movies = await fetchMoviesFromVidKing();
                currentMovies = movies;
                displayMovies(movies);
                apiStatus.textContent = 'Online';
                apiStatus.className = 'status-online';
                showNotification('Movies loaded successfully from VidKing API');
            } catch (error) {
                apiStatus.textContent = 'Offline - Using demo data';
                apiStatus.className = 'status-offline';
                showNotification('Using demo data - API offline');
                currentMovies = mockMovies;
                displayMovies(mockMovies);
            } finally {
                loader.style.display = 'none';
            }
        }

        // Category filtering
        categories.forEach(category => {
            category.addEventListener('click', function() {
                document.querySelector('.category.active').classList.remove('active');
                this.classList.add('active');
                
                const categoryName = this.dataset.category;
                
                if (categoryName === 'all') {
                    displayMovies(currentMovies);
                } else {
                    const filteredMovies = currentMovies.filter(movie => movie.category === categoryName);
                    displayMovies(filteredMovies);
                }
            });
        });

        // Search functionality
        searchBtn.addEventListener('click', function() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            if (searchTerm) {
                const filteredMovies = currentMovies.filter(movie => 
                    movie.title.toLowerCase().includes(searchTerm)
                );
                
                displayMovies(filteredMovies);
                
                if (filteredMovies.length === 0) {
                    showNotification('No movies found for your search.');
                }
            }
        });

        // Navigation active state
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const page = this.dataset.page;
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                showNotification(`Navigated to ${page.charAt(0).toUpperCase() + page.slice(1)} page`);
            });
        });

        // Event listeners
        closeModal.addEventListener('click', () => {
            movieModal.style.display = 'none';
        });

        playMovieBtn.addEventListener('click', playMovie);

        addToListBtn.addEventListener('click', () => {
            if (currentMovie) {
                showNotification(`Added "${currentMovie.title}" to your list`);
            }
        });

        exploreBtn.addEventListener('click', () => {
            displayMovies(currentMovies);
            showNotification('Showing all movies');
        });

        trendingBtn.addEventListener('click', () => {
            const trending = [...currentMovies].sort((a, b) => b.rating - a.rating).slice(0, 6);
            displayMovies(trending);
            showNotification('Showing trending movies');
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === movieModal) {
                movieModal.style.display = 'none';
            }
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadMovies();
            
            // Add event listener for Enter key in search
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchBtn.click();
                }
            });
        });
    </script>
</body>
</html>
